<!DOCTYPE html><html lang="en">    <head>        <meta charset="utf-8">        <meta name="description" content="Tony's Pizza Online Shop - A wonderful place for pizza-eaters!">        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">        <title>Tony's Pizza Factory - Homepage</title>        <link href="css/font-awesome.min.css" rel="stylesheet">        <link href="css/bootstrap.min.css" rel="stylesheet">        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">    </head>    <body>        <header>            <nav class="navbar navbar-expand-lg navbar-dark bg-primary">                <a class="navbar-brand" href="index.html"><i class="fa fa-pie-chart" aria-hidden="true"></i> Tony's Pizza Factory</a>                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">                    <span class="navbar-toggler-icon"></span>                </button>                <div class="collapse navbar-collapse" id="navbarSupportedContent">                    <ul class="navbar-nav ml-auto">                        <li class="nav-item"><a class="nav-link" href="pizza.html">Pizza</a></li>                        <li class="nav-item"><a class="nav-link" href="salad.html">Salad</a></li>                        <li class="nav-item"><a class="nav-link" href="softdrink.html">Soft drinks</a></li>                        <li class="nav-item active"><a class="nav-link" href="feedback.html">Feedback<span class="sr-only">(current)</span></a></li>                    </ul>                </div>            </nav>        </header>        <div class="container">            <h1 class="text-center mb-4">Tell us what you think</h1>            <form name="form">                <div class="form-row">                    <p class="form-group col-md-5 text-md-right pr-4">How do you like our pizza?</p>                    <div class="form-group col-md-7">                        <div class="form-check form-check-inline">                            <label class="form-check-label"><input class="form-check-input" type="radio" name="like" value="awesome"> Awesome</label>                        </div>                        <div class="form-check form-check-inline">                            <label class="form-check-label"><input class="form-check-input" type="radio" name="like" value="good"> Good</label>                        </div>                        <div class="form-check form-check-inline">                            <label class="form-check-label"><input class="form-check-input" type="radio" name="like" value="okay"> Okay</label>                        </div>                        <div class="form-check form-check-inline">                            <label class="form-check-label"><input class="form-check-input" type="radio" name="like" value="poor"> Poor</label>                        </div>                        <div id="likeinfo"></div>                    </div>                    <p class="form-group col-md-5 text-md-right pr-4">What do you think about our prizes?</p>                    <div class="form-group col-md-7">                        <div class="form-check form-check-inline">                            <label><input type="radio" name="price" value="fair"> Fair</label>                        </div>                        <div class="form-check form-check-inline">                            <label><input type="radio" name="price" value="okay"> Okay</label>                        </div>                        <div class="form-check form-check-inline">                            <label><input type="radio" name="price" value="expensive"> Expensive</label>                        </div>                        <div id="priceinfo"></div>                    </div>                    <p class="form-group col-md-5 text-md-right pr-4"><label for="name">Your name?</label></p>                    <div class="form-group col-md-7"><input class="form-control" type="text" name="name" id="name" placeholder="Tony Doe">                    <div id="nameinfo"></div>                    </div>                    <p class="form-group col-md-5 text-md-right pr-4"><label for="mail">Your e-mail address?</label></p>                    <div class="form-group col-md-7"><input class="form-control" type="text" name="mail" id="mail" placeholder="tony.doe@example.com">                    <div id="mailinfo"></div>                    </div>                    <p class="form-group col-md-5 text-md-right pr-4"><label for="feedback">What can we do better?</label></p>                    <div class="form-group col-md-7"><textarea class="form-control" rows="8" cols="30" maxlength="300" name="feedback" id="feedback" placeholder="Here's place for your feedback" onkeyup="displayFeedbackChars()"></textarea>                    <div id="feedbackinfo"></div>                    </div>                </div>                <div class="text-md-right"><button class="btn btn-primary right mb-4" type="button" onclick="sendFeedbackForm()">Send</button></div>                <div id="response"></div>                <div id="statistic"></div>            </form>        </div>        <footer class="bg-primary mt-2 pt-2">            <div class="container-fluid hidden-sm-down">                <div class="row justify-content-md-center">                    <div class="col-sm-4" id="hours">                        <p><i class="fa fa-clock-o" aria-hidden="true"></i> Hours:<br>                            Mon-Thu:<time datetime="11:00"> 11a.m.</time> - <time datetime="23:00">23p.m.</time><br>                            Fri-Sat:<time datetime="11:00"> 11a.m.</time> - <time datetime="00:00">24p.m.</time><br>                            Sunday closed</p>                    </div>                    <div class="col-sm-4 d-none d-md-block d-lg-block d-xl-block" id="quote">                        <blockquote><p class="text-center"><em>"The Pizzeria is one place I have been wanting to visit for a long time. The reason being their Rustica pizza which absolutely blew me away" - Jimmy</em></p></blockquote>                    </div>                    <div class="col-sm-4 d-none d-md-block d-lg-block d-xl-block" id="address">                        <p class="float-right"><i class="fa fa-home" aria-hidden="true"></i> Address:<br>                            Tony's Pizza Factory<br>                            2122 N Clark St<br>                            Chicago, IL 60614, USA                        </p>                    </div>                </div>            </div>        </footer>        <script src="js/jquery-3.2.1.min.js"></script>        <script src="js/popper.js"></script>        <script src="js/bootstrap.min.js"></script>        <script>        var auth = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.MQ.bYceSpllpyYQixgNzDt7dpCkEojdv3NKD-85XLXfdI4'; //Authentication key                //Validates the formdata before sending		function validateForm() {			var formRadios=["like","price"]; //Names of the Radio form elements			var valid=true; //Validation flag, if it stays true the data will be sent			var info; //Validation messages						//Checks if any Radio elements are empty    		for(var i=0;i<formRadios.length;i++){    			if (document.forms["form"][formRadios[i]].value == "") {        			info='<div class="alert alert-danger mb-0 pt-2 pb-2">Please choose an option</div>';        			document.getElementById(formRadios[i]+"info").innerHTML = info;        			valid = false; //set flag to abort sending    			} else {    				document.getElementById(formRadios[i]+"info").innerHTML = '';    			}    		}    		    		//Checks if the name field is empty    		if(document.getElementById("name").value==""){    			info='<div class="alert alert-danger mb-0 pt-2 pb-2">Please enter your name</div>';        		document.getElementById("nameinfo").innerHTML = info;        		valid = false; //set flag to abort sending    		} else {    			document.getElementById("nameinfo").innerHTML = '';    		}    		    		//Validates the e-mail address field    		if(!validateMail(document.getElementById("mail").value)){    			info='<div class="alert alert-danger mb-0 pt-2 pb-2">Please enter a valid e-mail address</div>';        		document.getElementById("mailinfo").innerHTML = info;        		valid = false; //set flag to abort sending    		} else {    			document.getElementById("mailinfo").innerHTML = '';    		}    		    		//Checks that the feedback text contains at least 50 characters    		if(document.getElementById("feedback").value.length<50 || document.getElementById("feedback").value.length>250){    			info='<div class="alert alert-danger mb-0 pt-2 pb-2">Your feedback must contain between 50 to 250 characters</div>';        		document.getElementById("feedbackinfo").innerHTML = info;        		valid = false; //set flag to abort sending    		} else {    			document.getElementById("feedbackinfo").innerHTML = '';    		}    		    		return valid;		}				//Validates the e-mail address per regex		function validateMail(mail) {    		var regex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;    		return regex.test(mail);		}				//Displays the number of chars of the feedback field		function displayFeedbackChars(){			if(document.getElementById("feedback").value.length>=0 && document.getElementById("feedback").value.length<50){				var info='<div class="alert alert-warning mb-0 pt-2 pb-2" id="feedbackinfo">'+document.getElementById("feedback").value.length+' from min 50 chars</div>';				document.getElementById("feedbackinfo").innerHTML = info;			} else if(document.getElementById("feedback").value.length>=50 && document.getElementById("feedback").value.length<=250){				var info='<div class="alert alert-info mb-0 pt-2 pb-2" id="feedbackinfo">'+document.getElementById("feedback").value.length+' from max 250 chars</div>';				document.getElementById("feedbackinfo").innerHTML = info;			} else {				var info='<div class="alert alert-warning mb-0 pt-2 pb-2" id="feedbackinfo">'+document.getElementById("feedback").value.length+' from max 250 chars</div>';				document.getElementById("feedbackinfo").innerHTML = info;			}		}				//Sends the entire form as JSON POST if the formdata is valid		function sendFeedbackForm() {			if(validateForm()){                var send = '{"name":"'+document.getElementById("name").value+'","pizzaRating":"'+document.forms["form"]["like"].value+'","prizeRating":"'+document.forms["form"]["price"].value+'","email":"'+document.getElementById("mail").value+'","feedback":"'+document.getElementById("feedback").value+'"}';                var xhttp = new XMLHttpRequest();                xhttp.onreadystatechange = function () {                    if (this.readyState == 4) {		            	if(this.status == 200 || this.status == 201) {		            		document.getElementById("response").innerHTML = '<div class="alert alert-success mb-3 pt-2 pb-2" id="response">Your feedback has been sent successfully!</div>';		            		requestFeedbacks(); //Displays the feedback statistics		            	} else if (this.status >= 400 && this.status <= 499){		            		document.getElementById("response").innerHTML = '<div class="alert alert-danger mb-3 pt-2 pb-2" id="response">Client Error, please try again later or contact us on phone or e-mail</div>';		            	} else if (this.status >= 500 && this.status <= 599){		            		document.getElementById("response").innerHTML = '<div class="alert alert-danger mb-3 pt-2 pb-2" id="response">Server Error, please try again later or contact us on phone or e-mail</div>';		            	} else if (this.status == 0){		            		document.getElementById("response").innerHTML = '<div class="alert alert-danger mb-3 pt-2 pb-2" id="response">Unknown Error, please try again later or contact us on phone or e-mail</div>';            		}	            }                };                xhttp.open("POST", "https://tonyspizzafactory.herokuapp.com/api/feedback", true);                xhttp.setRequestHeader("Content-type", "application/json");                xhttp.setRequestHeader('Authorization', auth);                xhttp.send(send);			}        }                //Gets the Feedbacks and shows them in a table        function requestFeedbacks(){        	var xhttp = new XMLHttpRequest();            xhttp.onreadystatechange = function () {                if (this.readyState == 4 && this.status == 200) {                    var json = JSON.parse(this.responseText);                    document.getElementById("statistic").innerHTML = createStats(json);                }            };            xhttp.open("GET", "https://tonyspizzafactory.herokuapp.com/api/feedback", true);			xhttp.setRequestHeader("Accept", "application/json");            xhttp.setRequestHeader('Authorization', auth);            xhttp.send();        }                //Creates the html for the statistics        function createStats(json){        	var html = '<div class="container"><div class="row"><div class="col-md-6">';        	html += '<h2>Pizza Rating Statistics</h2>';        	html += '<table class="table table-responsive table-bordered">';        	html += '<thead class="thead-default">';        	html += '<tr>';        	html += '<th>Total</th>';        	html += '<th>Awesome</th>';        	html += '<th>Good</th>';        	html += '<th>Okay</th>';        	html += '<th>Poor</th>';        	html += '<tr>';        	html += '</thead>';        	html += '<tbody>';        	html += '<tr>';        	html += '<td>'+json.length+'</td>';        	html += '<td>'+countPizzaRating(json, "awesome")+'</td>';        	html += '<td>'+countPizzaRating(json, "good")+'</td>';        	html += '<td>'+countPizzaRating(json, "okay")+'</td>';        	html += '<td>'+countPizzaRating(json, "poor")+'</td>';        	html += '<tr>';        	html += '</tbody>';        	html += '</table>';        	html += '</div>';        	html += '<br><div class="col-md-6">';        	html += '<h2>Prize Rating Statistics</h2>';        	html += '<table class="table table-responsive table-bordered">';        	html += '<thead class="thead-default">';        	html += '<tr>';        	html += '<th>Total</th>';        	html += '<th>Fair</th>';        	html += '<th>Okay</th>';        	html += '<th>Expensive</th>';        	html += '<tr>';        	html += '</thead>';        	html += '<tbody>';        	html += '<tr>';        	html += '<td>'+json.length+'</td>';        	html += '<td>'+countPrizeRating(json, "fair")+'</td>';        	html += '<td>'+countPrizeRating(json, "okay")+'</td>';        	html += '<td>'+countPrizeRating(json, "expensive")+'</td>';        	html += '<tr>';        	html += '</tbody>';        	html += '</table>';        	html += '</div></div></div>';        	return html;        }                //Counts the pizza ratings        function countPizzaRating(json, string){        	var count=0;        	for(var i=0;i<json.length;i++){        		if(json[i].pizzaRating.toLowerCase() == string){        			count++;        		}        	}        	return count;        }                //Counts the prize ratings        function countPrizeRating(json, string){        	var count=0;        	for(var i=0;i<json.length;i++){        		if(json[i].prizeRating.toLowerCase() == string){        			count++;        		}        	}        	return count;        }        </script>    </body></html>